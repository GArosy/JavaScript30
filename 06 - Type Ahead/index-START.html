<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Type Ahead ğŸ‘€</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <form class="search-form">
    <input type="text" class="search" placeholder="è¯—å¥ è¯—å è¯—äºº" />
    <ul class="suggestions">
      <li>è¾“å…¥è¯å¥ï¼Œæ‰¾ä¸€é¦–è¯—</li>
      <li></li>
    </ul>
  </form>
  <script>
    const endpoint =
      "https://gist.githubusercontent.com/soyaine/81399bb2b24ca1bb5313e1985533c640/raw/bdf7df2cbcf70706c4a5e51a7dfb8c933ed78878/TangPoetry.json";
    // jsonè½¬æ•°ç»„
    const poetryList = [];
    fetch(endpoint)
      .then((response) => response.json())
      .then((response) => poetryList.push(...response));
    console.log(poetryList);

    // è¾“å…¥å¤„ç†å‡½æ•°
    const inputHandle = function (input, poetryList) {
      console.log('input change');
      return poetryList.filter((poet) => {
        // æ­£åˆ™æ‰¾å‡ºåŒ¹é…è¯—å¥
        const regex = /input/ig;
        // jsonçš„ä½œè€…æ•°æ®æ•°ç»„å½¢å¼ï¼Œé¡»è½¬æ¢ä¸ºå­—ç¬¦ä¸²
        const author = poet.detail_author.join('');
        console.log(authorList);
        return (
          poet.title.match(regex) ||
          poet.detail_text.match(regex) ||
          author.match(regex)
          )
      })
    }

    // è¾“å‡ºå¤„ç†å‡½æ•°
    const outputHandle = function () {
      
    }

    // è·å–å…ƒç´ ï¼Œæ·»åŠ ç›‘å¬äº‹ä»¶
    const search = document.querySelector(".search");
    const suggestions = document.querySelector(".suggestions");

    search.addEventListener('change', inputHandle, false);
    search.addEventListener('keyup', outputHandle, false);
  </script>
</body>

</html>